<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Performance Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cool Gray and Muted Blue -->
    <!-- Application Structure Plan: The application is structured as a single-page dashboard with a fixed left-side navigation menu and a main content area. This design was chosen for its intuitive user flow, allowing seamless switching between different analytical views (Dashboard, Trades, Journal) without page reloads. The main dashboard provides a high-level "at-a-glance" overview of key performance indicators (KPIs), while dedicated sections allow for deeper dives into individual trades and qualitative notes. This structure prioritizes usability by presenting the most important information first and offering clear pathways to more detailed analysis, directly translating the source report's sections into an interactive, task-oriented layout. -->
    <!-- Visualization & Content Choices: Key metrics (Total P&L, Profit Factor) are presented in dynamic stat cards for quick information consumption. The Win/Loss ratio is a donut chart (Chart.js) for clear proportional comparison. Cumulative P&L is a line chart (Chart.js) to show performance trends over time, with interactive filters for different time ranges. The trade log is an interactive HTML table with filtering capabilities to allow for detailed organization and analysis of individual trades. This combination of elements was chosen to make the data from the source report not just visible, but explorable and easy to digest. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
        }
        .sidebar-icon {
            width: 24px;
            height: 24px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        input[type="text"], input[type="number"], input[type="date"], select, textarea {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            border-radius: 0.5rem;
            width: 100%;
            transition: border-color 0.2s;
        }
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #6366f1;
        }
    </style>
</head>
<body class="flex bg-gray-100 text-gray-800">

    <!-- Sidebar Navigation -->
    <aside class="w-20 md:w-64 bg-white shadow-md flex flex-col items-center md:items-start md:p-4 transition-all duration-300">
        <div class="flex items-center justify-center md:justify-start w-full h-16 border-b border-gray-200">
             <span class="text-xl font-bold text-indigo-600 hidden md:block">TradeTrack</span>
        </div>
        <nav class="mt-6 w-full">
            <ul class="space-y-2">
                <li>
                    <a href="#dashboard" class="nav-link flex items-center justify-center md:justify-start p-3 rounded-lg text-gray-600 hover:bg-indigo-50 hover:text-indigo-600 bg-indigo-50 text-indigo-600" data-section="dashboard">
                        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>
                        <span class="ml-4 hidden md:block">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#trades" class="nav-link flex items-center justify-center md:justify-start p-3 rounded-lg text-gray-600 hover:bg-indigo-50 hover:text-indigo-600" data-section="trades">
                        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2a4 4 0 00-4-4H3V7h2a4 4 0 004-4v2m8 14v-2a4 4 0 00-4-4h-2V7h2a4 4 0 004-4v2"></path></svg>
                        <span class="ml-4 hidden md:block">Trades</span>
                    </a>
                </li>
                <li>
                    <a href="#journal" class="nav-link flex items-center justify-center md:justify-start p-3 rounded-lg text-gray-600 hover:bg-indigo-50 hover:text-indigo-600" data-section="journal">
                        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                        <span class="ml-4 hidden md:block">Journal</span>
                    </a>
                </li>
                <li>
                    <a href="#add-trade" class="nav-link flex items-center justify-center md:justify-start p-3 rounded-lg text-gray-600 hover:bg-indigo-50 hover:text-indigo-600" data-section="add-trade">
                        <svg class="sidebar-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span class="ml-4 hidden md:block">Add Trade</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 p-4 md:p-8 overflow-y-auto h-screen">
        
        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Dashboard</h1>
            <div class="mb-6">
                <p class="text-gray-600">This section provides a high-level overview of your trading performance. Key metrics are displayed in the cards below, offering a quick snapshot of your profitability, win rate, and risk management. Use the charts to visualize your cumulative growth and the balance between your winning and losing trades.</p>
            </div>
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500">Total Net P&L</h3>
                    <p id="total-pnl" class="text-3xl font-bold text-green-600 mt-2">$0.00</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500">Profit Factor</h3>
                    <p id="profit-factor" class="text-3xl font-bold text-gray-800 mt-2">0.00</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500">Avg. Winning Trade</h3>
                    <p id="avg-win" class="text-3xl font-bold text-green-500 mt-2">$0.00</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500">Avg. Losing Trade</h3>
                    <p id="avg-loss" class="text-3xl font-bold text-red-500 mt-2">$0.00</p>
                </div>
            </div>

            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-lg font-semibold mb-4">Cumulative P&L</h3>
                    <div class="chart-container">
                        <canvas id="cumulativePnlChart"></canvas>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-sm">
                    <h3 class="text-lg font-semibold mb-4">Win Rate % by Trades</h3>
                    <div class="chart-container" style="height: 350px; max-height: 400px;">
                        <canvas id="winRateChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Trades Section -->
        <section id="trades" class="content-section hidden">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Trade Log</h1>
             <div class="mb-6">
                <p class="text-gray-600">Here you can view and analyze every trade you've taken. Use the filter options to narrow down your trades by ticker symbol or direction (Long/Short). This detailed view helps in identifying patterns in your trading, reviewing specific setups, and understanding the performance of different strategies or assets.</p>
            </div>
            <!-- Filters -->
            <div class="flex space-x-4 mb-6">
                <input type="text" id="ticker-filter" placeholder="Filter by Ticker (e.g., AAPL)" class="w-full md:w-1/3 p-2 border border-gray-300 rounded-lg">
                <select id="direction-filter" class="p-2 border border-gray-300 rounded-lg">
                    <option value="all">All Directions</option>
                    <option value="Long">Long</option>
                    <option value="Short">Short</option>
                </select>
            </div>
            <!-- Trades Table -->
            <div class="bg-white p-6 rounded-xl shadow-sm overflow-x-auto">
                <table class="w-full text-left">
                    <thead>
                        <tr class="border-b">
                            <th class="p-3">Date</th>
                            <th class="p-3">Ticker</th>
                            <th class="p-3">Direction</th>
                            <th class="p-3">Entry</th>
                            <th class="p-3">Exit</th>
                            <th class="p-3">Size</th>
                            <th class="p-3">Net P&L</th>
                            <th class="p-3">Result</th>
                        </tr>
                    </thead>
                    <tbody id="trades-table-body">
                        <!-- JS will populate this -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Journal Section -->
        <section id="journal" class="content-section hidden">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Journal</h1>
            <div class="mb-6">
                <p class="text-gray-600">This section is for your qualitative analysis. For each trade, reflect on your reasoning, emotional state, and the lessons learned. Consistently journaling is one of the most effective ways to improve discipline, recognize behavioral patterns, and accelerate your learning curve as a trader.</p>
            </div>
            <div id="journal-entries" class="space-y-6">
                <!-- JS will populate this -->
            </div>
        </section>

        <!-- Add Trade Section -->
        <section id="add-trade" class="content-section hidden">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Add New Trade</h1>
            <div class="mb-6">
                <p class="text-gray-600">Use the form below to add a new trade to your journal. Once submitted, your dashboard and trade log will be automatically updated with the new data.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-sm">
                <form id="add-trade-form" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="trade-date" class="block text-sm font-medium text-gray-700">Date</label>
                            <input type="date" id="trade-date" required>
                        </div>
                        <div>
                            <label for="trade-ticker" class="block text-sm font-medium text-gray-700">Ticker Symbol</label>
                            <input type="text" id="trade-ticker" placeholder="e.g., AAPL" required>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="trade-direction" class="block text-sm font-medium text-gray-700">Direction</label>
                            <select id="trade-direction" required>
                                <option value="Long">Long</option>
                                <option value="Short">Short</option>
                            </select>
                        </div>
                        <div>
                            <label for="trade-size" class="block text-sm font-medium text-gray-700">Size (Shares/Units)</label>
                            <input type="number" id="trade-size" placeholder="e.g., 10" step="any" required>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="trade-entry" class="block text-sm font-medium text-gray-700">Entry Price</label>
                            <input type="number" id="trade-entry" placeholder="e.g., 190.50" step="any" required>
                        </div>
                        <div>
                            <label for="trade-exit" class="block text-sm font-medium text-gray-700">Exit Price</label>
                            <input type="number" id="trade-exit" placeholder="e.g., 195.20" step="any" required>
                        </div>
                    </div>
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="trade-commissions" class="block text-sm font-medium text-gray-700">Commissions/Fees</label>
                            <input type="number" id="trade-commissions" placeholder="e.g., 5.00" step="any" required>
                        </div>
                        <div>
                            <label for="trade-result" class="block text-sm font-medium text-gray-700">Result</label>
                            <select id="trade-result" required>
                                <option value="Win">Win</option>
                                <option value="Loss">Loss</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label for="trade-reason" class="block text-sm font-medium text-gray-700">Reason for Trade</label>
                        <textarea id="trade-reason" rows="3" placeholder="Describe your setup or thesis..."></textarea>
                    </div>
                    <div>
                        <label for="trade-emotions" class="block text-sm font-medium text-gray-700">Emotions</label>
                        <textarea id="trade-emotions" rows="3" placeholder="How did you feel?"></textarea>
                    </div>
                    <div>
                        <label for="trade-lessons" class="block text-sm font-medium text-gray-700">Lessons Learned</label>
                        <textarea id="trade-lessons" rows="3" placeholder="What did you learn from this trade?"></textarea>
                    </div>
                     <div>
                        <label for="trade-tags" class="block text-sm font-medium text-gray-700">Tags</label>
                        <input type="text" id="trade-tags" placeholder="e.g., A+ setup, discipline error">
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700 transition duration-200">
                        Add Trade
                    </button>
                </form>
                <div id="message-box" class="mt-4 p-4 rounded-lg hidden"></div>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let tradesData = [
                { date: '2024-07-01', ticker: 'AAPL', direction: 'Long', entry: 190.50, exit: 195.20, size: 10, commissions: 5.00, result: 'Win', notes: { reason: 'Breakout above resistance.', emotions: 'Confident', lessons: 'Patience pays off.', tags: 'A+ setup' } },
                { date: '2024-07-02', ticker: 'TSLA', direction: 'Short', entry: 185.00, exit: 188.50, size: 15, commissions: 7.50, result: 'Loss', notes: { reason: 'Faded strength, but news turned against me.', emotions: 'Anxious', lessons: 'Avoid trading around major news events.', tags: 'discipline error' } },
                { date: '2024-07-03', ticker: 'NVDA', direction: 'Long', entry: 120.80, exit: 125.10, size: 20, commissions: 10.00, result: 'Win', notes: { reason: 'Strong uptrend continuation.', emotions: 'Calm', lessons: 'Sticking to the trend works.', tags: 'trend following' } },
                { date: '2024-07-05', ticker: 'GOOGL', direction: 'Long', entry: 175.40, exit: 174.90, size: 10, commissions: 5.00, result: 'Loss', notes: { reason: 'Anticipated a bounce that did not happen.', emotions: 'Frustrated', lessons: 'Wait for confirmation before entering.', tags: 'overtraded' } },
                { date: '2024-07-08', ticker: 'MSFT', direction: 'Long', entry: 450.00, exit: 460.00, size: 5, commissions: 2.50, result: 'Win', notes: { reason: 'Earnings run-up play.', emotions: 'Excited', lessons: 'Good risk management.', tags: 'A+ setup' } },
                { date: '2024-07-10', ticker: 'AMD', direction: 'Short', entry: 160.00, exit: 155.00, size: 12, commissions: 6.00, result: 'Win', notes: { reason: 'Failed breakout and reversal.', emotions: 'Focused', lessons: 'Shorting weakness is a valid strategy.', tags: 'reversal' } },
            ];

            let cumulativePnlChart, winRateChart;

            function updateDashboard() {
                const processedTrades = tradesData.map(trade => {
                    const grossPnl = (trade.exit - trade.entry) * trade.size * (trade.direction === 'Short' ? -1 : 1);
                    const netPnl = grossPnl - trade.commissions;
                    return { ...trade, netPnl };
                });

                const totalPnl = processedTrades.reduce((sum, trade) => sum + trade.netPnl, 0);
                const winningTrades = processedTrades.filter(t => t.result === 'Win');
                const losingTrades = processedTrades.filter(t => t.result === 'Loss');
                
                const totalWins = winningTrades.reduce((sum, t) => sum + t.netPnl, 0);
                const totalLosses = Math.abs(losingTrades.reduce((sum, t) => sum + t.netPnl, 0));
                
                const profitFactor = totalLosses > 0 ? (totalWins / totalLosses) : 0;
                const avgWin = winningTrades.length > 0 ? totalWins / winningTrades.length : 0;
                const avgLoss = losingTrades.length > 0 ? totalLosses / losingTrades.length : 0;
                
                const winCount = winningTrades.length;
                const lossCount = losingTrades.length;
                const totalTrades = processedTrades.length;
                
                // Render Stats
                document.getElementById('total-pnl').textContent = `$${totalPnl.toFixed(2)}`;
                document.getElementById('total-pnl').className = `text-3xl font-bold mt-2 ${totalPnl >= 0 ? 'text-green-600' : 'text-red-600'}`;
                document.getElementById('profit-factor').textContent = profitFactor.toFixed(2);
                document.getElementById('avg-win').textContent = `$${avgWin.toFixed(2)}`;
                document.getElementById('avg-loss').textContent = `$${avgLoss.toFixed(2)}`;
                
                // Render Trades Table
                const tradesTableBody = document.getElementById('trades-table-body');
                tradesTableBody.innerHTML = '';
                if (processedTrades.length === 0) {
                    tradesTableBody.innerHTML = '<tr><td colspan="8" class="text-center p-4 text-gray-500">No trades to display.</td></tr>';
                } else {
                    processedTrades.forEach(trade => {
                        const row = document.createElement('tr');
                        row.className = 'border-b hover:bg-gray-50';
                        row.innerHTML = `
                            <td class="p-3">${trade.date}</td>
                            <td class="p-3 font-medium">${trade.ticker}</td>
                            <td class="p-3">
                                <span class="px-2 py-1 text-xs rounded-full ${trade.direction === 'Long' ? 'bg-blue-100 text-blue-800' : 'bg-purple-100 text-purple-800'}">${trade.direction}</span>
                            </td>
                            <td class="p-3">$${trade.entry.toFixed(2)}</td>
                            <td class="p-3">$${trade.exit.toFixed(2)}</td>
                            <td class="p-3">${trade.size}</td>
                            <td class="p-3 font-medium ${trade.netPnl >= 0 ? 'text-green-600' : 'text-red-600'}">$${trade.netPnl.toFixed(2)}</td>
                            <td class="p-3">
                                <span class="px-2 py-1 font-semibold text-xs rounded-full ${trade.result === 'Win' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${trade.result}</span>
                            </td>
                        `;
                        tradesTableBody.appendChild(row);
                    });
                }

                // Render Journal
                const journalEntriesContainer = document.getElementById('journal-entries');
                journalEntriesContainer.innerHTML = '';
                processedTrades.slice().reverse().forEach(trade => {
                    const entry = document.createElement('div');
                    entry.className = 'bg-white p-6 rounded-xl shadow-sm';
                    entry.innerHTML = `
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-bold">${trade.ticker} <span class="text-base font-normal text-gray-500">- ${trade.date}</span></h3>
                            <span class="px-3 py-1 text-sm rounded-full ${trade.result === 'Win' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${trade.result}</span>
                        </div>
                        <div class="space-y-3 text-gray-700">
                            <p><strong>Reason for Trade:</strong> ${trade.notes.reason || 'N/A'}</p>
                            <p><strong>Emotions:</strong> ${trade.notes.emotions || 'N/A'}</p>
                            <p><strong>Lessons Learned:</strong> ${trade.notes.lessons || 'N/A'}</p>
                            <div>
                                <span class="text-sm font-medium bg-gray-200 text-gray-800 px-2 py-1 rounded">${trade.notes.tags || 'N/A'}</span>
                            </div>
                        </div>
                    `;
                    journalEntriesContainer.appendChild(entry);
                });

                // Update Charts
                if (cumulativePnlChart) cumulativePnlChart.destroy();
                if (winRateChart) winRateChart.destroy();
                
                const cumulativePnlData = processedTrades.reduce((acc, trade, index) => {
                    const prevTotal = index > 0 ? acc[index - 1].y : 0;
                    acc.push({ x: trade.date, y: prevTotal + trade.netPnl });
                    return acc;
                }, []);
                
                const pnlCtx = document.getElementById('cumulativePnlChart').getContext('2d');
                cumulativePnlChart = new Chart(pnlCtx, {
                    type: 'line',
                    data: {
                        labels: cumulativePnlData.map(d => d.x),
                        datasets: [{
                            label: 'Cumulative P&L',
                            data: cumulativePnlData.map(d => d.y),
                            borderColor: 'rgb(79, 70, 229)',
                            backgroundColor: 'rgba(79, 70, 229, 0.1)',
                            fill: true,
                            tension: 0.3,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { beginAtZero: false } }
                    }
                });

                const winRateCtx = document.getElementById('winRateChart').getContext('2d');
                winRateChart = new Chart(winRateCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Wins', 'Losses'],
                        datasets: [{
                            data: [winCount, lossCount],
                            backgroundColor: ['rgb(22, 163, 74)', 'rgb(220, 38, 38)'],
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) { label += ': '; }
                                        if (context.parsed !== null) {
                                            label += `${context.parsed} trades (${((context.parsed / totalTrades) * 100).toFixed(1)}%)`;
                                        }
                                        return label;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // --- NAVIGATION & EVENT LISTENERS ---
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionId = link.getAttribute('data-section');
                    navLinks.forEach(l => l.classList.remove('bg-indigo-50', 'text-indigo-600'));
                    link.classList.add('bg-indigo-50', 'text-indigo-600');
                    contentSections.forEach(section => {
                        if (section.id === sectionId) {
                            section.classList.remove('hidden');
                        } else {
                            section.classList.add('hidden');
                        }
                    });
                });
            });

            const tickerFilter = document.getElementById('ticker-filter');
            const directionFilter = document.getElementById('direction-filter');
            function applyFilters() {
                const tickerValue = tickerFilter.value.toUpperCase();
                const directionValue = directionFilter.value;
                const filteredTrades = tradesData.filter(trade => {
                    const tickerMatch = trade.ticker.toUpperCase().includes(tickerValue);
                    const directionMatch = directionValue === 'all' || trade.direction === directionValue;
                    return tickerMatch && directionMatch;
                });
                renderTrades(filteredTrades);
            }
            tickerFilter.addEventListener('input', applyFilters);
            directionFilter.addEventListener('change', applyFilters);

            const addTradeForm = document.getElementById('add-trade-form');
            const messageBox = document.getElementById('message-box');
            addTradeForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const newTrade = {
                    date: document.getElementById('trade-date').value,
                    ticker: document.getElementById('trade-ticker').value.toUpperCase(),
                    direction: document.getElementById('trade-direction').value,
                    entry: parseFloat(document.getElementById('trade-entry').value),
                    exit: parseFloat(document.getElementById('trade-exit').value),
                    size: parseInt(document.getElementById('trade-size').value),
                    commissions: parseFloat(document.getElementById('trade-commissions').value),
                    result: document.getElementById('trade-result').value,
                    notes: {
                        reason: document.getElementById('trade-reason').value,
                        emotions: document.getElementById('trade-emotions').value,
                        lessons: document.getElementById('trade-lessons').value,
                        tags: document.getElementById('trade-tags').value,
                    }
                };
                
                if (isNaN(newTrade.entry) || isNaN(newTrade.exit) || isNaN(newTrade.size) || isNaN(newTrade.commissions)) {
                    messageBox.textContent = 'Please enter valid numbers for price, size, and commissions.';
                    messageBox.className = 'mt-4 p-4 rounded-lg bg-red-100 text-red-700';
                    messageBox.style.display = 'block';
                    return;
                }
                
                tradesData.push(newTrade);
                updateDashboard();
                addTradeForm.reset();
                messageBox.textContent = 'Trade successfully added!';
                messageBox.className = 'mt-4 p-4 rounded-lg bg-green-100 text-green-700';
                messageBox.style.display = 'block';
                setTimeout(() => {
                    messageBox.style.display = 'none';
                }, 3000);
            });

            // --- INITIALIZATION ---
            function init() {
                updateDashboard();
            }

            init();
        });
    </script>
</body>
</html>
